/**
This program transform a String into a bicolored image(black and white). Every character is transform into its ascii value, then the ascii value into binary.
The input must be coded in UTF-8. The image is saved in the program folder.

How yo use :

1) change the value of input
2) decomment Getting image size in setup and run, the size of the window is print in the console (ctrl + /)
2) comment Getting image size, decomment Generating image
3) change the value of size in setup
4) run
*/


String input ="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Nulla facilisi nullam vehicula ipsum a arcu. Molestie nunc non blandit massa enim nec dui. Lacus vestibulum sed arcu non odio euismod lacinia at quis. Ornare massa eget egestas purus viverra accumsan in nisl. Eget magna fermentum iaculis eu non diam phasellus. Fermentum dui faucibus in ornare quam viverra orci sagittis eu. Tincidunt tortor aliquam nulla facilisi cras fermentum. Mi tempus imperdiet nulla malesuada pellentesque. Vitae tortor condimentum lacinia quis vel. Vitae suscipit tellus mauris a diam. Adipiscing vitae proin sagittis nisl rhoncus. Ante in nibh mauris cursus mattis molestie. At ultrices mi tempus imperdiet nulla malesuada pellentesque elit. Sagittis id consectetur purus ut faucibus pulvinar elementum. Pharetra et ultrices neque ornare aenean euismod elementum. Sollicitudin ac orci phasellus egestas tellus rutrum tellus pellentesque eu. Cum sociis natoque penatibus et. Non diam phasellus vestibulum lorem sed risus ultricies tristique. Adipiscing commodo elit at imperdiet dui accumsan sit. Pulvinar pellentesque habitant morbi tristique senectus et netus et. Risus commodo viverra maecenas accumsan lacus vel facilisis. Ac tortor dignissim convallis aenean et tortor. Dui sapien eget mi proin sed libero. Ultricies tristique nulla aliquet enim tortor. Mauris a diam maecenas sed enim ut. Lobortis mattis aliquam faucibus purus in massa tempor. Ornare arcu dui vivamus arcu felis. Cras tincidunt lobortis feugiat vivamus at augue eget arcu. Sed elementum tempus egestas sed sed risus pretium quam. In est ante in nibh. Ut porttitor leo a diam sollicitudin tempor id eu nisl. Eget est lorem ipsum dolor sit amet consectetur. Et pharetra pharetra massa massa ultricies mi. Lobortis mattis aliquam faucibus purus in massa tempor nec. Viverra tellus in hac habitasse platea dictumst vestibulum rhoncus. Libero justo laoreet sit amet cursus sit. Integer quis auctor elit sed vulputate mi sit. Turpis in eu mi bibendum neque egestas. Pulvinar sapien et ligula ullamcorper malesuada proin. Ultrices mi tempus imperdiet nulla. Facilisi etiam dignissim diam quis enim lobortis scelerisque fermentum dui. Aliquet eget sit amet tellus cras adipiscing enim eu turpis. Pellentesque eu tincidunt tortor aliquam nulla facilisi cras. Elit duis tristique sollicitudin nibh sit amet commodo. Feugiat nibh sed pulvinar proin gravida hendrerit. Mattis enim ut tellus elementum sagittis. Arcu dictum varius duis at consectetur. Nisi est sit amet facilisis magna etiam tempor orci. Nulla facilisi morbi tempus iaculis urna id volutpat lacus. Maecenas ultricies mi eget mauris pharetra et. Nulla malesuada pellentesque elit eget gravida. Integer quis auctor elit sed vulputate mi sit amet mauris. Nullam eget felis eget nunc lobortis mattis aliquam faucibus. Faucibus et molestie ac feugiat sed. Facilisi nullam vehicula ipsum a arcu cursus vitae congue mauris. Nisl pretium fusce id velit ut tortor pretium. Sagittis purus sit amet volutpat consequat mauris nunc congue. Auctor neque vitae tempus quam pellentesque nec nam aliquam sem. Sem viverra aliquet eget sit amet tellus cras adipiscing enim. Suspendisse sed nisi lacus sed viverra tellus in hac. Non enim praesent elementum facilisis leo vel fringilla. Scelerisque varius morbi enim nunc faucibus a pellentesque sit. Aenean sed adipiscing diam donec adipiscing tristique. Sed lectus vestibulum mattis ullamcorper velit sed ullamcorper morbi. Faucibus in ornare quam viverra orci. Aenean vel elit scelerisque mauris pellentesque pulvinar pellentesque habitant. Lobortis feugiat vivamus at augue eget arcu. Nunc non blandit massa enim nec. Cras pulvinar mattis nunc sed blandit libero volutpat sed. Iaculis urna id volutpat lacus laoreet non curabitur gravida arcu. Id venenatis a condimentum vitae sapien pellentesque habitant morbi tristique. Sollicitudin aliquam ultrices sagittis orci a scelerisque. Vitae suscipit tellus mauris a. Diam ut venenatis tellus in metus. A condimentum vitae sapien pellentesque. At consectetur lorem donec massa sapien faucibus et. Pulvinar elementum integer enim neque. Neque ornare aenean euismod elementum nisi quis eleifend quam adipiscing. Neque viverra justo nec ultrices dui sapien eget mi. Aliquet bibendum enim facilisis gravida neque convallis a. Felis bibendum ut tristique et. Scelerisque felis imperdiet proin fermentum leo vel. Sed libero enim sed faucibus turpis. Adipiscing elit pellentesque habitant morbi tristique senectus et. Sed vulputate mi sit amet mauris commodo quis imperdiet. Tempus iaculis urna id volutpat lacus laoreet. Amet luctus venenatis lectus magna fringilla urna porttitor. Lectus vestibulum mattis ullamcorper velit sed ullamcorper. Cras ornare arcu dui vivamus arcu felis. Nec tincidunt praesent semper feugiat nibh sed. Faucibus scelerisque eleifend donec pretium vulputate sapien nec sagittis. Nunc sed velit dignissim sodales ut eu sem. Et ligula ullamcorper malesuada proin libero nunc consequat interdum varius. Enim lobortis scelerisque fermentum dui faucibus in ornare quam. Placerat orci nulla pellentesque dignissim. In hac habitasse platea dictumst quisque sagittis purus sit amet. Arcu cursus vitae congue mauris rhoncus aenean. Ut consequat semper viverra nam. In ante metus dictum at. Dignissim convallis aenean et tortor at. Elit eget gravida cum sociis natoque. Eget felis eget nunc lobortis mattis aliquam. Etiam dignissim diam quis enim lobortis scelerisque fermentum dui. Aliquet nibh praesent tristique magna sit amet purus gravida quis. Euismod elementum nisi quis eleifend quam adipiscing. Diam sollicitudin tempor id eu nisl nunc. Tortor vitae purus faucibus ornare suspendisse sed nisi lacus. Tristique nulla aliquet enim tortor at auctor. Sed enim ut sem viverra. Vitae aliquet nec ullamcorper sit amet risus nullam. Convallis posuere morbi leo urna molestie at elementum. In tellus integer feugiat scelerisque varius. Aliquam eleifend mi in nulla. Amet massa vitae tortor condimentum. Tempus urna et pharetra pharetra. Neque aliquam vestibulum morbi blandit cursus risus at ultrices mi. Condimentum lacinia quis vel eros donec ac odio tempor. Ornare arcu odio ut sem. Sagittis aliquam malesuada bibendum arcu vitae elementum curabitur vitae.";;              

int sizeWindow;            // size of the displayed window, can be assign by getSizeWindow();
String [] binaryInput;     // every ascii value translated into binaries, each bit is stored individualy
PImage result;             // the generated image


void setup() {
  
  //Getting image size
  //==================
  //size(10,10);
  //print(getSizeWindow());
  //exit();
  
  //Generatig image
  //===============
  //size(225 ,225);  
  //binaryInput = generateBinary(input);
  //generateImage();
  //result.updatePixels();
  //image(result,0,0); 
  //save("result.jpg");
  //exit();
}

public String[] generateBinary(String input) {
 
  // Generating the ascii value from the input
  
  int [] asciiValue = new int [input.length()];
  for(int i = 0 ; i < input.length(); i++) {
    asciiValue[i]=int(input.charAt(i));
  }
  
  // Generating the binary
  
  String [] binaries = new String [input.length()];
  for(int i = 0 ; i < asciiValue.length; i++) {
    binaries[i] = binary(asciiValue[i]);
  }  
  
  String [] tmp = new String [asciiValue.length];
  String [] result = new String [tmp.length*8];
  
  for(int i = 0 ; i < asciiValue.length ; i++) {
     tmp[i] = binaries[i].substring(24); //24 because binary return a 32 bits value and we consider only to use UTF-8
  }
  
  int index = 0;
  for(int i = 0 ; i < tmp.length ; i++) {
    for (int j = 0 ; j < 8 ; j++) {
      result[index]=String.valueOf(tmp[i].charAt(j));
      index++;
    }
  }  
  return result;
}


public void generateImage() {
  int size = getSizeWindow();
  result = createImage(size, size, RGB);
  for (int i = 0 ; i < result.pixels.length ; i ++) {
    if (i >= binaryInput.length) {
      result.pixels[i] = color(255,255,255);
    }
    else {
      if(Integer.valueOf(binaryInput[i])==0)result.pixels[i]= color(255,255,255);
      else result.pixels[i]= color(0,0,0);
    } 
  }  
}


public int getSizeWindow() {
  return (sqrt(input.length()*8)==0)? (int) sqrt(input.length()*8) :(int) sqrt(input.length()*8)+1; 
}
